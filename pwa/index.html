<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ElectroWallet</title>
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="stylesheet" href="./styles.css" />
  <meta name="theme-color" content="#0a0a12" />
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js').catch(() => {});
      });
    }
  </script>
</head>
<body>
  <div class="app" id="app">
    <section class="auth-screen" id="authScreen">
      <div class="auth-card">
        <div class="logo">₿</div>
        <h1>ElectroWallet</h1>
        <p class="auth-subtitle">Bitcoin Cold Storage Wallet</p>
        <div class="auth-buttons">
          <button id="createAccountBtn" class="btn-auth-primary">Create New Wallet</button>
          <button id="loginBtn" class="btn-auth-secondary">Import Wallet</button>
        </div>
      </div>
    </section>

    <section class="create-screen" id="createScreen" hidden>
      <div class="auth-card">
        <h2>Create New Wallet</h2>
        <p class="info-text">Your wallet will be secured with a PIN. Save your recovery phrase safely.</p>
        <form id="createForm">
          <input type="password" name="pin" placeholder="Enter 4-digit PIN" pattern="[0-9]{4}" required minlength="4" maxlength="4" />
          <input type="password" name="confirmPin" placeholder="Confirm PIN" pattern="[0-9]{4}" required minlength="4" maxlength="4" />
          <div class="form-actions">
            <button type="button" id="cancelCreate" class="btn-secondary">Cancel</button>
            <button type="submit" class="btn-primary">Create Wallet</button>
          </div>
        </form>
      </div>
    </section>

    <section class="login-screen" id="loginScreen" hidden>
      <div class="auth-card">
        <h2>Import Wallet</h2>
        <p class="info-text">Enter your recovery phrase and PIN to restore your wallet.</p>
        <form id="loginForm">
          <textarea name="phrase" placeholder="Enter your 12-word recovery phrase" rows="3" required></textarea>
          <input type="password" name="pin" placeholder="Enter PIN" pattern="[0-9]{4}" required minlength="4" maxlength="4" />
          <div class="form-actions">
            <button type="button" id="cancelLogin" class="btn-secondary">Cancel</button>
            <button type="submit" class="btn-primary">Import Wallet</button>
          </div>
        </form>
      </div>
    </section>

    <section class="recovery-screen" id="recoveryScreen" hidden>
      <div class="auth-card">
        <h2>Save Your Recovery Phrase</h2>
        <p class="warning-text">⚠️ Write this down and keep it safe. You'll need it to recover your wallet.</p>
        <div class="recovery-phrase" id="recoveryPhrase"></div>
        <button id="confirmRecovery" class="btn-primary">I've Saved My Phrase</button>
      </div>
    </section>

    <div id="mainApp" hidden>
      <header class="header">
        <h1>ElectroWallet</h1>
        <button id="logoutBtn" class="btn-logout">Logout</button>
      </header>

      <section class="balance-card">
        <div class="balance-label">Balance</div>
        <div class="balance-amount" id="balance">0.00</div>
        <div class="balance-unit">BTC</div>
      </section>

      <section class="wallet-info">
        <div class="info-label">Your Bitcoin Address</div>
        <div class="address-display" id="address">—</div>
        <button id="copyAddress" class="btn-secondary">Copy Address</button>
      </section>

      <section class="actions">
        <button id="receiveBtn" class="btn-primary">Receive</button>
        <button id="sendBtn" class="btn-primary">Send</button>
      </section>

      <section class="card" id="sendCard" hidden>
      <h3>Send Bitcoin</h3>
      <form id="sendForm">
        <input name="to" placeholder="Recipient address" required autocomplete="off" />
        <input name="amount" type="number" step="0.00000001" min="0.00000001" placeholder="Amount (BTC)" required />
        <div class="form-actions">
          <button type="button" id="cancelSend" class="btn-secondary">Cancel</button>
          <button type="submit" class="btn-primary">Send</button>
        </div>
      </form>
    </section>

    <section class="card" id="receiveCard" hidden>
      <h3>Receive Bitcoin</h3>
      <div class="qr-placeholder" id="qrCode">QR Code</div>
      <div class="receive-address" id="receiveAddress">—</div>
      <button id="copyReceive" class="btn-secondary">Copy Address</button>
      <button id="closeReceive" class="btn-secondary">Close</button>
    </section>

      <section class="card">
        <h3>Recent Activity</h3>
        <div id="txList" class="tx-list"></div>
        <div id="emptyState" class="empty-state">No transactions yet</div>
      </section>
    </div>

    <div id="status" class="status-toast" hidden></div>
  </div>

  <template id="txTemplate">
    <div class="tx-item">
      <div class="tx-icon"></div>
      <div class="tx-details">
        <div class="tx-type"></div>
        <div class="tx-address"></div>
      </div>
      <div class="tx-amount"></div>
    </div>
  </template>

  <script src="./app.js"></script>
</body>
</html>
